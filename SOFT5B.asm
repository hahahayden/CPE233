.DSEG
.ORG 0x05
a: .DB 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00

.DEF ARRAY_IN = R1
.DEF ARRAY_POINT = R2
.DEF ARRAY_SIZE = R3
.DEF COUNT = R4
.DEF START = R5 
.DEF CURR = R6
.DEF BEGIN = R7
.DEF CURRENT = R9
.DEF MIN = R8

.CSEG
.ORG 0X60
MOV COUNT,0x00
MOV ARRAY_POINT,0X05
MOV ARRAY_SIZE,0X05
MOV COUNT,0x00
INPUT:	IN R1, 0X9A
		ST R1,(R2)
		ADD ARRAY_POINT,0X01
		ADD COUNT,0x01
		CMP COUNT,ARRAY_SIZE
		BRCS INPUT

MOV COUNT, 0x04;  counter for inputs
MOV START, 0x05;   pointer
MOV CURRENT, 0x05;   second pointer
MOV CURR, 0X05
ADD ARRAY_SIZE,CURRENT
LOOP:	MOV R6,START
		LD R7,(R5)	;LOAD IN INITIAL VALUE
		BRN COMPARE
		
COMPARE:ADD CURR,0x01
		CMP CURR,ARRAY_SIZE
		BREQ RESET
		LD R9,(R6)
		CMP CURRENT,BEGIN
		BRCC COMPARE
MOV MIN,CURRENT
MOV R12,R6		
SMALL: 	LD R9,(R12)
		CMP R12,ARRAY_SIZE
		BREQ SWAP
		ADD R12,0X01
		CMP MIN,CURRENT
		BRCS SMALL
		MOV MIN, CURRENT
		BRN SMALL 
														
RESET:  MOV R10,START
		ADD R10,0X01
		CMP R10, ARRAY_SIZE
		BREQ DONE
		ADD START,0X01
		BRNE LOOP
		
SWAP: 	ST R8,(R5)
		ST R7,(R12)
		ADD START,0X01
		CMP START,ARRAY_SIZE
		BRCS LOOP
		
				
DONE: OUT R8,0x42
